<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>MindAR AR System</title>
    <script src="./aframe.min.js"></script>
    <script type="module" src="./mindar-image.prod.js"></script>
    <script type="module" src="./mindar-image-aframe.prod.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aframe-extras@6.1.1/dist/aframe-extras.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
      .social-links {
        position: absolute;
        top: 50%;
        right: 10px;
        transform: translateY(-50%);
        z-index: 10000;
        display: flex;
        flex-direction: column;
        pointer-events: auto;
        }

        .share-button {
        width: 40px;
        height: 40px;
        margin: 0 -10px 10px 5px;
        background-color: rgba(255, 255, 255, 0.9);
        border-radius: 25% 0 0 25%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.3s;
        box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        .share-button:hover {
            transform: scale(1.1);
            background-color: rgba(255, 255, 255, 1);
        }

        .share-button i {
            font-size: 1.5em;
        }

        .share-button svg {
            width: 24px;
            height: 24px;
        }

        .share-button a {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 100%;
            text-decoration: none;
            color: inherit;
        }

        .share-button .fa-vk { color: #4C75A3; }
        .share-button .fa-youtube { color: #ff0000; }
        .share-button .fa-telegram { color: #00a2ff; }
        .share-button .fa-globe { color: #6c757d; }
    </style>
</head>
<body style='margin : 0px; overflow: hidden;'>
    
    <div id="ctl00_MainContent_socialLinks" class="social-links"></div>
    <a-scene mindar-image="imageTargetSrc: assets/targets/targets.mind; autoStart: true;" vr-mode-ui="enabled: false" device-orientation-permission-ui="enabled: false">
        <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>
        <a-light type="directional" position="1 1 1" intensity="10"></a-light>
        <a-light type="ambient" intensity="10"></a-light>

        <a-entity mindar-image-target="targetIndex: 0">
            <a-gltf-model data-src="assets/models/shtuc/shtuc.gltf" position="0 0 0" scale="1 1 1"></a-gltf-model>
        </a-entity>
        <a-entity mindar-image-target="targetIndex: 1">
            <a-gltf-model data-src="assets/models/svar/svarc.gltf" position="0 0 0" scale="1 1 1"></a-gltf-model>
        </a-entity>
        <a-entity mindar-image-target="targetIndex: 2">
            <a-gltf-model data-src="assets/models/Electromonter/elecmon.gltf" position="0 0 0" scale="1 1 1"></a-gltf-model>
        </a-entity>
        <a-entity mindar-image-target="targetIndex: 3">
            <a-gltf-model data-src="assets/models/Enjeneer/energ.gltf" position="0 0 0" scale="1 1 1"></a-gltf-model>
        </a-entity>
        <a-entity mindar-image-target="targetIndex: 4">
            <a-gltf-model data-src="assets/models/Mashlok/scene.gltf" position="0 0 0" scale="1 1 1"></a-gltf-model>
        </a-entity>
        <a-entity mindar-image-target="targetIndex: 5">
            <a-gltf-model data-src="assets/models/Mashkran/kran.gltf" position="0 0 0" scale="1 1 1"></a-gltf-model>
        </a-entity>
<!--    <a-entity mindar-image-target="targetIndex: 6">
            <a-gltf-model src="assets/models/Transobsl/" position="0 0 0" scale="1 1 1"></a-gltf-model>
        </a-entity>    -->  
        <a-entity mindar-image-target="targetIndex: 7">
            <a-gltf-model data-src="assets/models/Slesremauto/scene.gltf" position="0 0 0" scale="1 1 1"></a-gltf-model>
        </a-entity>
        <a-entity mindar-image-target="targetIndex: 8">
            <a-gltf-model data-src="assets/models/Povar/scene.gltf" position="0 0 0" scale="1 1 1"></a-gltf-model>
        </a-entity>
        <a-entity mindar-image-target="targetIndex: 9">
            <a-gltf-model data-src="assets/models/Officiant/scene.gltf" position="0 0 0" scale="1 1 1"></a-gltf-model>
        </a-entity>
<!--    <a-entity mindar-image-target="targetIndex: 10">
            <a-gltf-model src="assets/models/Perevod/" position="0 0 0" scale="1 1 1"></a-gltf-model>
        </a-entity>       -->  
        <a-entity mindar-image-target="targetIndex: 11">
            <a-gltf-model data-src="assets/models/Parikmah/scene.gltf" position="0 0 0" scale="1 1 1"></a-gltf-model>
        </a-entity>
        <a-entity mindar-image-target="targetIndex: 12">
            <a-gltf-model data-src="assets/models/Trakmasselsko/scene.gltf" position="0 0 0" scale="1 1 1"></a-gltf-model>
        </a-entity>
        <a-entity mindar-image-target="targetIndex: 13">
            <a-gltf-model data-src="assets/models/VetFeldsher/scene.gltf" position="0 0 0" scale="1 1 1"></a-gltf-model>
        </a-entity>
        <a-entity mindar-image-target="targetIndex: 14">
            <a-gltf-model data-src="assets/models/MashEkskavator/scene.gltf" position="0 0 0" scale="1 1 1"></a-gltf-model>
        </a-entity>
        <a-entity mindar-image-target="targetIndex: 15">
            <a-gltf-model data-src="assets/models/Injeneerteks/scene.gltf" position="0 0 0" scale="1 1 1"></a-gltf-model>
        </a-entity>
        <a-entity mindar-image-target="targetIndex: 16">
            <a-gltf-model data-src="assets/models/Dobilshik/scene.gltf" position="0 0 0" scale="1 1 1"></a-gltf-model>
        </a-entity>
        <a-entity mindar-image-target="targetIndex: 17">
            <a-gltf-model data-src="assets/models/Operatorpylyprav/scene.gltf" position="0 0 0" scale="1 1 1"></a-gltf-model>
        </a-entity>
        <a-entity mindar-image-target="targetIndex: 18">
            <a-gltf-model data-src="assets/models/MashKonveera/scene.gltf" position="0 0 0" scale="1 1 1"></a-gltf-model>
        </a-entity>
        <a-entity mindar-image-target="targetIndex: 19">
            <a-gltf-model data-src="assets/models/Kontrolprodobog/scene.gltf" position="0 0 0" scale="1 1 1"></a-gltf-model>
        </a-entity>
        <a-entity mindar-image-target="targetIndex: 20">
            <a-gltf-model data-src="assets/models/Vospitatel/scene.gltf" position="0 0 0" scale="1 1 1"></a-gltf-model>
        </a-entity>
        <a-entity mindar-image-target="targetIndex: 21">
            <a-gltf-model data-src="assets/models/ychitelmatem/scene.gltf" position="0 0 0" scale="1 1 1"></a-gltf-model>
        </a-entity>
        <a-entity mindar-image-target="targetIndex: 22">
            <a-gltf-model data-src="assets/models/Medsestra/scene.gltf" position="0 0 0" scale="1 1 1"></a-gltf-model>
        </a-entity>
        <a-entity mindar-image-target="targetIndex: 23">
            <a-gltf-model data-src="assets/models/Feldsher/scene.gltf" position="0 0 0" scale="1 1 1"></a-gltf-model>
        </a-entity>
        <a-entity mindar-image-target="targetIndex: 24">
            <a-gltf-model data-src="assets/models/Sysadmin/scene.gltf" position="0 0 0" scale="1 1 1"></a-gltf-model>
        </a-entity>
        <a-entity mindar-image-target="targetIndex: 25">
            <a-gltf-model data-src="assets/models/Artinstrument/scene.gltf" position="0 0 0" scale="1 1 1"></a-gltf-model>
        </a-entity>
        <a-entity mindar-image-target="targetIndex: 26">
            <a-gltf-model data-src="assets/models/Shvey/scene.gltf" position="0 0 0" scale="1 1 1"></a-gltf-model>
        </a-entity>
        <a-entity mindar-image-target="targetIndex: 27">
            <a-gltf-model data-src="assets/models/teleoper/scene.gltf" position="0 0 0" scale="1 1 1"></a-gltf-model>
        </a-entity>



    </a-scene>
    <div id="footer"></div>

    <script src="social-links.js"></script>
    <script>
    fetch('footer.html')
            .then(response => response.text())
            .then(html => {
                document.getElementById('footer').innerHTML = html;
            });
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const targets = document.querySelectorAll('a-entity[mindar-image-target]');
            const models = document.querySelectorAll('a-gltf-model');

            // Загружаем модели только при обнаружении таргета
            targets.forEach((target, index) => {
                target.addEventListener('targetFound', () => {
                    console.log(`Target ${index} found`);
                    // Загружаем модель только сейчас
                    const model = models[index];
                    if (model && !model.getAttribute('src')) {
                        model.setAttribute('src', model.dataset.src);
                    }
                });
                target.addEventListener('targetLost', () => {
                    console.log(`Target ${index} lost`);
                });
            });
        });
    </script>
</body>
</html>
